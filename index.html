<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™©ê¸ˆ í‚¤ì›Œë“œ ìƒí™©ì‹¤</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .container { max-width: 1400px; }
        
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 0.75em; font-weight: bold; color: white; vertical-align: middle; }
        .badge-naver { background-color: #03C75A; }
        .badge-coupang { background-color: #E60F29; }
        
        .grade-dia { color: #9C27B0; font-weight: 900; } 
        .grade-gold { color: #FF9800; font-weight: 800; } 
        .grade-silver { color: #607D8B; font-weight: 700; } 
        .grade-bad { color: #999; font-size: 0.9em; }

        .eff-good { color: #2e7d32; font-weight: bold; }
        .eff-bad { color: #d32f2f; } 
        
        th { font-weight: bold; color: #333; background-color: #f4f4f4; white-space: nowrap; font-size: 0.9em; }
        td { vertical-align: middle; font-size: 0.95em; }
        .num-col { text-align: right; }
    </style>
</head>
<body>
    <main class="container">
        <nav>
            <ul>
                <li><strong>ğŸ’ í™©ê¸ˆ í‚¤ì›Œë“œ ë°œêµ´ê¸°</strong></li>
            </ul>
            <ul>
                <li><small id="update-time">ì—…ë°ì´íŠ¸ ì¤‘...</small></li>
            </ul>
        </nav>

        <article>
            <p>
                <strong>ğŸ’¡ ê²½ìŸ ê°•ë„(ê²½ìŸë¥ ):</strong> ë¸”ë¡œê·¸ ìˆ˜ Ã· ê²€ìƒ‰ëŸ‰<br>
                <small>* ìˆ˜ì¹˜ê°€ <strong>1.0 ë¯¸ë§Œ(ğŸ”¥)</strong>ì´ë©´ ê¸€ì´ ë¶€ì¡±í•œ 'ë¸”ë£¨ì˜¤ì…˜'ì…ë‹ˆë‹¤. (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)</small>
            </p>
            
            <figure>
                <table role="grid">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 8%;">ì¶œì²˜</th>
                            <th scope="col" style="width: 8%;">ìˆœìœ„</th>
                            <th scope="col">í‚¤ì›Œë“œ</th>
                            <th scope="col" class="num-col">í™©ê¸ˆì§€ìˆ˜</th>
                            <th scope="col" class="num-col">ê²½ìŸê°•ë„ (ê²½ìŸë¥ )</th>
                            <th scope="col" class="num-col">ì›”ê°„ ê²€ìƒ‰ëŸ‰</th>
                            <th scope="col" class="num-col">ê´‘ê³ ë‹¨ê°€(CPC)</th>
                            <th scope="col" class="num-col">ë¸”ë¡œê·¸ ìˆ˜</th>
                        </tr>
                    </thead>
                    <tbody id="keyword-list">
                        <tr><td colspan="8">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</td></tr>
                    </tbody>
                </table>
            </figure>
        </article>
    </main>

    <script>
        fetch('output/data.json')
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('keyword-list');
                const timeLabel = document.getElementById('update-time');
                
                timeLabel.innerText = "ìµœì¢… ë¶„ì„: " + new Date().toLocaleString();
                tbody.innerHTML = '';

                data.forEach(item => {
                    const tr = document.createElement('tr');
                    
                    let badgeClass = item.source === 'COUPANG' ? 'badge-coupang' : 'badge-naver';
                    
                    let scoreHtml = `<span class="grade-bad">${item.golden_score}ì </span>`;
                    if (item.grade.includes("DIAMOND")) scoreHtml = `<span class="grade-dia">ğŸ’ ${item.golden_score}ì </span>`;
                    else if (item.grade.includes("GOLD")) scoreHtml = `<span class="grade-gold">ğŸŒŸ ${item.golden_score}ì </span>`;
                    else if (item.grade.includes("SILVER")) scoreHtml = `<span class="grade-silver">âœ¨ ${item.golden_score}ì </span>`;

                    let comp = item.efficiency;
                    if (!comp) comp = (item.blog_count / (item.search_volume || 1)).toFixed(2);
                    
                    let effClass = '';
                    let effIcon = '';
                    
                    if (comp < 1.0) { effClass = 'eff-good'; effIcon = 'ğŸ”¥'; }
                    else if (comp > 5.0) { effClass = 'eff-bad'; effIcon = 'ğŸ’§'; }

                    tr.innerHTML = `
                        <td><span class="badge ${badgeClass}">${item.source}</span></td>
                        <td>${item.rank}</td>
                        <td>
                            <strong>${item.keyword}</strong><br>
                            <small style="color:#666;">${item.grade}</small>
                        </td>
                        <td class="num-col">${scoreHtml}</td>
                        <td class="num-col ${effClass}">
                            ${effIcon} ${comp}
                        </td>
                        <td class="num-col"><strong>${item.search_volume.toLocaleString()}</strong></td>
                        <td class="num-col">${item.cpc.toLocaleString()}</td>
                        <td class="num-col">${item.blog_count.toLocaleString()}</td>
                    `;
                    tbody.appendChild(tr);
                });
            })
            .catch(err => {
                console.error(err);
                tbody.innerHTML = "<tr><td colspan='8'>ë°ì´í„° ë¡œë”© ì‹¤íŒ¨</td></tr>";
            });
    </script>
</body>
</html>
